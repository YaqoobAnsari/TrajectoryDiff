# TrajectoryDiff Model Configuration
# Trajectory-conditioned diffusion model for radio map generation

model:
  name: trajectory_diffusion
  
  # Input/output channels
  in_channels: 4  # floor_plan (3) + sparse_rss (1)
  out_channels: 1  # radio map
  
  # Diffusion parameters
  diffusion:
    num_timesteps: 1000
    beta_schedule: linear  # linear | cosine | sqrt
    beta_start: 0.0001
    beta_end: 0.02
    
    # Sampling
    sampling_method: ddim  # ddpm | ddim
    ddim_steps: 50  # Only used if sampling_method=ddim
    
    # Loss
    prediction_type: epsilon  # epsilon | v_prediction | x_start
    loss_type: mse  # mse | l1 | huber

  # U-Net backbone
  unet:
    base_channels: 64
    channel_multipliers: [1, 2, 4, 8]
    num_res_blocks: 2
    attention_resolutions: [16, 8]  # Apply attention at these resolutions
    dropout: 0.1
    
    # Time embedding
    time_embed_dim: 256
    
    # Conditioning
    use_cross_attention: true
    cross_attention_dim: 256  # Trajectory embedding dimension

  # Trajectory encoder
  trajectory_encoder:
    type: hybrid  # gnn | transformer | hybrid
    
    # Common parameters
    hidden_dim: 256
    output_dim: 256
    dropout: 0.1
    
    # GNN-specific (if type=gnn or hybrid)
    gnn:
      num_layers: 4
      conv_type: gat  # gcn | gat | sage
      heads: 4  # For GAT
    
    # Transformer-specific (if type=transformer or hybrid)
    transformer:
      num_layers: 4
      num_heads: 8
      ff_dim: 512
    
    # Spatial encoder (processes sparse RSS map)
    spatial_encoder:
      channels: [32, 64, 128]
      kernel_size: 3
    
    # Coverage encoder (processes coverage density map)
    coverage_encoder:
      channels: [16, 32, 64]
      kernel_size: 5

  # Physics-informed components
  physics:
    enabled: true
    
    # Trajectory consistency loss
    trajectory_consistency:
      enabled: true
      weight: 0.1
    
    # Wall attenuation loss
    wall_attenuation:
      enabled: false  # Requires material info
      weight: 0.05
    
    # Distance decay regularization
    distance_decay:
      enabled: false
      weight: 0.01

  # Uncertainty estimation
  uncertainty:
    enabled: true
    num_samples: 10  # Number of samples for uncertainty estimation
